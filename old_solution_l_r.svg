<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="340.1338px" preserveAspectRatio="none" style="width:592px;height:340px;" version="1.1" viewBox="0 0 592 340" width="592.9766px" zoomAndPan="magnify"><defs><filter height="300%" id="fdm5jpfungmkk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0066889632107023"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.013377926421405" dy="4.013377926421405" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="16.0535" cy="25.5853" fill="#000000" filter="url(#fdm5jpfungmkk)" rx="10.0334" ry="10.0334" style="stroke: none; stroke-width: 1.0033444816053512;"/><rect fill="#FEFECE" filter="url(#fdm5jpfungmkk)" height="35.2111" rx="12.5418" ry="12.5418" style="stroke: #A80036; stroke-width: 1.5050167224080266;" width="155.5184" x="46.6555" y="8.0268"/><text fill="#000000" font-family="sans-serif" font-size="12.0401" lengthAdjust="spacingAndGlyphs" textLength="135.4515" x="56.689" y="30.5589">for each document to tag</text><rect fill="#FEFECE" filter="url(#fdm5jpfungmkk)" height="35.2111" rx="12.5418" ry="12.5418" style="stroke: #A80036; stroke-width: 1.5050167224080266;" width="203.6789" x="222.2408" y="8.0268"/><text fill="#000000" font-family="sans-serif" font-size="12.0401" lengthAdjust="spacingAndGlyphs" textLength="183.612" x="232.2742" y="30.5589">extract with ids from family id path</text><rect fill="#FEFECE" filter="url(#fdm5jpfungmkk)" height="35.2111" rx="12.5418" ry="12.5418" style="stroke: #A80036; stroke-width: 1.5050167224080266;" width="77.2575" x="445.9866" y="8.0268"/><text fill="#000000" font-family="sans-serif" font-size="12.0401" lengthAdjust="spacingAndGlyphs" textLength="57.1906" x="456.0201" y="30.5589">for each id</text><rect fill="#FEFECE" filter="url(#fdm5jpfungmkk)" height="35.2111" rx="12.5418" ry="12.5418" style="stroke: #A80036; stroke-width: 1.5050167224080266;" width="61.204" x="422.9097" y="83.2776"/><text fill="#000000" font-family="sans-serif" font-size="12.0401" lengthAdjust="spacingAndGlyphs" textLength="41.1371" x="432.9431" y="105.8097">add tag</text><rect fill="#FEFECE" filter="url(#fdm5jpfungmkk)" height="35.2111" rx="12.5418" ry="12.5418" style="stroke: #A80036; stroke-width: 1.5050167224080266;" width="194.6488" x="387.291" y="158.5284"/><text fill="#000000" font-family="sans-serif" font-size="12.0401" lengthAdjust="spacingAndGlyphs" textLength="174.5819" x="397.3244" y="181.0606">send operation to Elasticsearch</text><rect fill="#FEFECE" filter="url(#fdm5jpfungmkk)" height="35.2111" rx="12.5418" ry="12.5418" style="stroke: #A80036; stroke-width: 1.5050167224080266;" width="95.3177" x="436.9565" y="233.7793"/><text fill="#000000" font-family="sans-serif" font-size="12.0401" lengthAdjust="spacingAndGlyphs" textLength="75.2508" x="446.99" y="256.3114">Elasticsearch</text><ellipse cx="484.6154" cy="319.0635" fill="none" filter="url(#fdm5jpfungmkk)" rx="10.0334" ry="10.0334" style="stroke: #000000; stroke-width: 1.0033444816053512;"/><ellipse cx="485.1171" cy="319.5652" fill="#000000" rx="6.0201" ry="6.0201" style="stroke: none; stroke-width: 1.0033444816053512;"/><!--MD5=[7723e5ce1f83905ab68ab2f5a26df035]
link start to for each document to tag--><path d="M26.2124,25.5853 C31.2951,25.5853 36.3779,25.5853 41.4606,25.5853 " fill="none" id="start-&gt;for each document to tag" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><polygon fill="#A80036" points="46.5433,25.5853,37.5132,21.5719,41.5266,25.5853,37.5132,29.5987,46.5433,25.5853" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><!--MD5=[6aef6d15ea01e94e88c77b5f1d1ac55e]
link for each document to tag to extract with ids from family id path--><path d="M202.4087,25.5853 C207.1796,25.5853 211.9495,25.5853 216.7194,25.5853 " fill="none" id="for each document to tag-&gt;extract with ids from family id path" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><polygon fill="#A80036" points="221.8957,25.5853,212.8656,21.5719,216.8789,25.5853,212.8656,29.5987,221.8957,25.5853" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><!--MD5=[340730924b700092a521b68af453a6e2]
link extract with ids from family id path to for each id--><path d="M425.9829,25.5853 C430.804,25.5853 435.6261,25.5853 440.4472,25.5853 " fill="none" id="extract with ids from family id path-&gt;for each id" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><polygon fill="#A80036" points="445.6796,25.5853,436.6495,21.5719,440.6629,25.5853,436.6495,29.5987,445.6796,25.5853" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><!--MD5=[a60708e4c4a0c33ecc8d99a9ed2226bd]
link for each id to add tag--><path d="M477.5579,43.209 C473.1351,53.6237 467.39,67.1508 462.6251,78.3722 " fill="none" id="for each id-&gt;add tag" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><polygon fill="#A80036" points="460.6495,83.0247,467.8728,76.2813,462.6101,78.407,460.4844,73.1443,460.6495,83.0247" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><!--MD5=[1b5caf76c7f929be42bdc753f03c2f6d]
link add tag to send operation to Elasticsearch--><path d="M460.5692,118.4599 C464.992,128.8746 470.7371,142.4017 475.502,153.6231 " fill="none" id="add tag-&gt;send operation to Elasticsearch" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><polygon fill="#A80036" points="477.4776,158.2756,477.6427,148.3952,475.517,153.6578,470.2543,151.5321,477.4776,158.2756" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><!--MD5=[673d2b0df823811e1de31b6b465a1219]
reverse link for each id to send operation to Elasticsearch--><path d="M489.3793,48.309 C491.4472,58.814 493.6274,71.6408 494.6488,83.2776 C496.0144,98.8254 496.0144,102.8468 494.6488,118.3946 C493.4599,131.9358 490.7027,147.0883 488.3789,158.3187 " fill="none" id="for each id&lt;-send operation to Elasticsearch" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><polygon fill="#A80036" points="488.3789,43.3535,486.2301,52.9988,489.3708,48.2712,494.0984,51.4119,488.3789,43.3535" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><!--MD5=[41ac1811639b32e16340dd8e4f27db0f]
link send operation to Elasticsearch to Elasticsearch--><path d="M484.6154,193.7107 C484.6154,203.9388 484.6154,217.1709 484.6154,228.2709 " fill="none" id="send operation to Elasticsearch-&gt;Elasticsearch" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><polygon fill="#A80036" points="484.6154,233.5264,488.6288,224.4963,484.6154,228.5097,480.602,224.4963,484.6154,233.5264" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><!--MD5=[dc40486c8a13002c53976c16899822cc]
link Elasticsearch to end--><path d="M484.6154,268.9248 C484.6154,279.5765 484.6154,293.2809 484.6154,303.5091 " fill="none" id="Elasticsearch-&gt;end" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><polygon fill="#A80036" points="484.6154,308.7923,488.6288,299.7622,484.6154,303.7756,480.602,299.7622,484.6154,308.7923" style="stroke: #A80036; stroke-width: 1.0033444816053512;"/><!--MD5=[d54bae853f1c6d6d61e70dda8f74a5eb]
@startuml
scale 600 width
(*) -r-> for each document to tag
-r-> extract with ids from family id path
-r-> for each id
-d-> add tag
-d-> send operation to Elasticsearch
-u-> for each id
"send operation to Elasticsearch" -d-> Elasticsearch
- -> (*)

@enduml

PlantUML version 1.2020.03beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.77
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>