<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="708.75px" preserveAspectRatio="none" style="width:938px;height:708px;" version="1.1" viewBox="0 0 938 708" width="938.75px" zoomAndPan="magnify"><defs><filter height="300%" id="f1jdvtk0d5vlr6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.5"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="5.0" dy="5.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><path d="M217.5,12.5 L217.5,106.7578 L467.5,106.7578 L467.5,25 L455,12.5 L217.5,12.5 " fill="#FBFB77" filter="url(#f1jdvtk0d5vlr6)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M455,12.5 L455,25 L467.5,25 L455,12.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="136.25" x="225" y="35.6189">A document exists</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="175" x="225" y="56.0583">With repo == sharepoint</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="117.5" x="225" y="76.4978">Is head of family</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="223.75" x="225" y="96.9373">Not yet tagged to a datasource</text><path d="M517.5,32.9395 L517.5,86.3184 L708.75,86.3184 L708.75,45.4395 L696.25,32.9395 L517.5,32.9395 " fill="#FBFB77" filter="url(#f1jdvtk0d5vlr6)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M696.25,32.9395 L696.25,45.4395 L708.75,45.4395 L696.25,32.9395 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="145" x="525" y="56.0583">A datasource exists</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="165" x="525" y="76.4978">For repo == sharepoint</text><ellipse cx="492.5" cy="59.6289" fill="#000000" filter="url(#f1jdvtk0d5vlr6)" rx="12.5" ry="12.5" style="stroke: none; stroke-width: 1.25;"/><path d="M402.5,200.625 L402.5,274.4434 L582.5,274.4434 L582.5,213.125 L570,200.625 L402.5,200.625 " fill="#FBFB77" filter="url(#f1jdvtk0d5vlr6)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M570,200.625 L570,213.125 L582.5,213.125 L570,200.625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="103.75" x="410" y="223.7439">For all tenants</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="153.75" x="410" y="244.1833">Apply datasource tag</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="145" x="410" y="264.6228">to untagged families</text><path d="M595.625,286.9434 L595.625,318.8525 L570.625,323.8525 L595.625,328.8525 L595.625,360.7617 A0,0 0 0 0 595.625,360.7617 L891.875,360.7617 A0,0 0 0 0 891.875,360.7617 L891.875,299.4434 L879.375,286.9434 L595.625,286.9434 A0,0 0 0 0 595.625,286.9434 " fill="#FBFB77" filter="url(#f1jdvtk0d5vlr6)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M879.375,286.9434 L879.375,299.4434 L891.875,299.4434 L879.375,286.9434 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="188.75" x="603.125" y="310.0623">Where repo == sharepoint</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="270" x="603.125" y="330.5017">And Not already tagged with DS == 1</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="151.25" x="603.125" y="350.9412">And is head of family</text><rect fill="#FEFECE" filter="url(#f1jdvtk0d5vlr6)" height="43.8672" rx="15.625" ry="15.625" style="stroke: #A80036; stroke-width: 1.875;" width="156.25" x="414.375" y="301.9189"/><text fill="#000000" font-family="sans-serif" font-size="15" lengthAdjust="spacingAndGlyphs" textLength="131.25" x="426.875" y="329.9902">Get me documents</text><path d="M120.625,460.0928 L120.625,493.0322 A0,0 0 0 0 120.625,493.0322 L399.375,493.0322 A0,0 0 0 0 399.375,493.0322 L399.375,482.5928 L424.375,476.5625 L399.375,472.5928 L399.375,472.5928 L386.875,460.0928 L120.625,460.0928 A0,0 0 0 0 120.625,460.0928 " fill="#FBFB77" filter="url(#f1jdvtk0d5vlr6)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M386.875,460.0928 L386.875,472.5928 L399.375,472.5928 L386.875,460.0928 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="252.5" x="128.125" y="483.2117">Our doc and all children are tagged</text><rect fill="#FEFECE" filter="url(#f1jdvtk0d5vlr6)" height="43.8672" rx="15.625" ry="15.625" style="stroke: #A80036; stroke-width: 1.875;" width="136.25" x="424.375" y="454.6289"/><text fill="#000000" font-family="sans-serif" font-size="15" lengthAdjust="spacingAndGlyphs" textLength="111.25" x="436.875" y="482.7002">Call Tag Service</text><rect fill="#FEFECE" filter="url(#f1jdvtk0d5vlr6)" height="43.8672" rx="15.625" ry="15.625" style="stroke: #A80036; stroke-width: 1.875;" width="112.5" x="436.25" y="385.7617"/><text fill="#000000" font-family="sans-serif" font-size="15" lengthAdjust="spacingAndGlyphs" textLength="83.75" x="452.5" y="413.833">for each doc</text><polygon fill="#FEFECE" filter="url(#f1jdvtk0d5vlr6)" points="451.25,523.4961,533.75,523.4961,548.75,538.4961,533.75,553.4961,451.25,553.4961,436.25,538.4961,451.25,523.4961" style="stroke: #A80036; stroke-width: 1.875;"/><text fill="#000000" font-family="sans-serif" font-size="13.75" lengthAdjust="spacingAndGlyphs" textLength="82.5" x="451.25" y="544.1223">has more doc</text><text fill="#000000" font-family="sans-serif" font-size="13.75" lengthAdjust="spacingAndGlyphs" textLength="22.5" x="548.75" y="535.4749">yes</text><rect fill="#FEFECE" filter="url(#f1jdvtk0d5vlr6)" height="43.8672" rx="15.625" ry="15.625" style="stroke: #A80036; stroke-width: 1.875;" width="102.5" x="441.25" y="131.7578"/><text fill="#000000" font-family="sans-serif" font-size="15" lengthAdjust="spacingAndGlyphs" textLength="73.75" x="457.5" y="159.8291">once a day</text><polygon fill="#FEFECE" filter="url(#f1jdvtk0d5vlr6)" points="476.25,578.4961,508.75,578.4961,523.75,593.4961,508.75,608.4961,476.25,608.4961,461.25,593.4961,476.25,578.4961" style="stroke: #A80036; stroke-width: 1.875;"/><text fill="#000000" font-family="sans-serif" font-size="13.75" lengthAdjust="spacingAndGlyphs" textLength="32.5" x="476.25" y="599.1223">sleep</text><path d="M12.5,620.9961 L12.5,694.8145 A0,0 0 0 0 12.5,694.8145 L347.5,694.8145 A0,0 0 0 0 347.5,694.8145 L347.5,662.9053 L372.5,657.9053 L347.5,652.9053 L347.5,633.4961 L335,620.9961 L12.5,620.9961 A0,0 0 0 0 12.5,620.9961 " fill="#FBFB77" filter="url(#f1jdvtk0d5vlr6)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M335,620.9961 L335,633.4961 L347.5,633.4961 L335,620.9961 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="261.25" x="20" y="644.115">New doc never gets tagged because</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="256.25" x="20" y="664.5544">the head of family is already tagged</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="308.75" x="20" y="684.9939">which precludes it from the daily operation.</text><rect fill="#FEFECE" filter="url(#f1jdvtk0d5vlr6)" height="43.8672" rx="15.625" ry="15.625" style="stroke: #A80036; stroke-width: 1.875;" width="240" x="372.5" y="635.9717"/><text fill="#000000" font-family="sans-serif" font-size="15" lengthAdjust="spacingAndGlyphs" textLength="215" x="385" y="664.043">New child doc added to our doc</text><line style="stroke: #A80036; stroke-width: 1.875;" x1="492.5" x2="492.5" y1="274.4434" y2="301.9189"/><polygon fill="#A80036" points="487.5,289.4189,492.5,301.9189,497.5,289.4189,492.5,294.4189" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="492.5" x2="492.5" y1="429.6289" y2="454.6289"/><polygon fill="#A80036" points="487.5,442.1289,492.5,454.6289,497.5,442.1289,492.5,447.1289" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="548.75" x2="575.625" y1="538.4961" y2="538.4961"/><polygon fill="#A80036" points="570.625,485.5957,575.625,473.0957,580.625,485.5957,575.625,480.5957" style="stroke: #A80036; stroke-width: 1.875;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="575.625" x2="575.625" y1="407.6953" y2="538.4961"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="575.625" x2="548.75" y1="407.6953" y2="407.6953"/><polygon fill="#A80036" points="561.25,402.6953,548.75,407.6953,561.25,412.6953,556.25,407.6953" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="492.5" x2="492.5" y1="498.4961" y2="523.4961"/><polygon fill="#A80036" points="487.5,510.9961,492.5,523.4961,497.5,510.9961,492.5,515.9961" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="492.5" x2="492.5" y1="345.7861" y2="385.7617"/><polygon fill="#A80036" points="487.5,373.2617,492.5,385.7617,497.5,373.2617,492.5,378.2617" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="492.5" x2="492.5" y1="175.625" y2="200.625"/><polygon fill="#A80036" points="487.5,188.125,492.5,200.625,497.5,188.125,492.5,193.125" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="523.75" x2="906.875" y1="593.4961" y2="593.4961"/><polygon fill="#A80036" points="901.875,396.0938,906.875,383.5938,911.875,396.0938,906.875,391.0938" style="stroke: #A80036; stroke-width: 1.875;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="906.875" x2="906.875" y1="153.6914" y2="593.4961"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="906.875" x2="543.75" y1="153.6914" y2="153.6914"/><polygon fill="#A80036" points="556.25,148.6914,543.75,153.6914,556.25,158.6914,551.25,153.6914" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="492.5" x2="492.5" y1="553.4961" y2="578.4961"/><polygon fill="#A80036" points="487.5,565.9961,492.5,578.4961,497.5,565.9961,492.5,570.9961" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="492.5" x2="492.5" y1="72.1289" y2="131.7578"/><polygon fill="#A80036" points="487.5,119.2578,492.5,131.7578,497.5,119.2578,492.5,124.2578" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.875;" x1="492.5" x2="492.5" y1="608.4961" y2="635.9717"/><polygon fill="#A80036" points="487.5,623.4717,492.5,635.9717,497.5,623.4717,492.5,628.4717" style="stroke: #A80036; stroke-width: 1.25;"/><!--MD5=[3a8e72fd4db683ab7d786247da232771]
@startuml
start
note left
A document exists
With repo == sharepoint
Is head of family
Not yet tagged to a datasource
end note
note right
A datasource exists
For repo == sharepoint
end note
repeat : once a day;
note right
For all tenants
Apply datasource tag
to untagged families
end note
:Get me documents;
note right
Where repo == sharepoint
And Not already tagged with DS == 1
And is head of family
end note
repeat : for each doc;
:Call Tag Service;
repeat while (has more doc) is (yes);
repeat while (sleep);
note left
Our doc and all children are tagged
end note
:New child doc added to our doc;
note left
New doc never gets tagged because
the head of family is already tagged
which precludes it from the daily operation.
end note
@enduml

PlantUML version 1.2020.03beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.77
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>